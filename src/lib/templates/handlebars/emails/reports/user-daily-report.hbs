{{#base headerTitle="Your Daily Activity Report" headerSubtitle="Personal performance insights for {{date}}"}}

<div class="greeting">
    Hello {{name}}! üìä
</div>

<div class="message">
    <p>Here's your comprehensive daily activity summary for <strong>{{date}}</strong>. This personalized report highlights your accomplishments, progress, and performance metrics to help you track your professional growth.</p>
</div>

<!-- Work Status Summary -->
{{#if metrics.attendance.status}}
<div class="success-notice">
    <h4 style="color: #15803d; margin-bottom: 8px;">‚è∞ Today's Work Summary</h4>
    <p style="color: #15803d; margin: 0; font-size: 16px;">
        You worked <strong>{{metrics.attendance.duration}}</strong> today{{#if metrics.attendance.startTime}} 
        ({{metrics.attendance.startTime}}{{#if metrics.attendance.endTime}} - {{metrics.attendance.endTime}}{{else}} - Currently Working{{/if}}){{/if}}{{#if metrics.attendance.overtime}}{{#unless (eq metrics.attendance.overtime "0h 0m")}}, including <strong style="color: #f59e0b;">{{metrics.attendance.overtime}} overtime</strong>{{/unless}}{{/if}}! 
        Great commitment to your professional goals. üéØ
    </p>
</div>
{{/if}}

<!-- Today's Performance Metrics -->
<div class="info-card">
    <h3>üìà Today's Performance Overview</h3>
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">Tasks Completed</span>
            <span class="detail-value" style="font-weight: 700; color: {{#if (gte metrics.userSpecific.todayTasks 5)}}#22c55e{{else if (gte metrics.userSpecific.todayTasks 3)}}#f59e0b{{else}}#ef4444{{/if}}; font-size: 17px;">{{metrics.userSpecific.todayTasks}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Hours Worked</span>
            <span class="detail-value" style="font-weight: 700; color: {{#if (gte metrics.userSpecific.hoursWorked 8)}}#22c55e{{else if (gte metrics.userSpecific.hoursWorked 6)}}#f59e0b{{else}}#ef4444{{/if}}; font-size: 17px;">{{metrics.userSpecific.hoursWorked}}h</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">New Leads Generated</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (gte metrics.userSpecific.todayLeads 3)}}#22c55e{{else if (gte metrics.userSpecific.todayLeads 1)}}#f59e0b{{else}}#6b7280{{/if}};">{{metrics.userSpecific.todayLeads}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Quotations Created</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (gte metrics.userSpecific.todayQuotations 2)}}#22c55e{{else if (gte metrics.userSpecific.todayQuotations 1)}}#f59e0b{{else}}#6b7280{{/if}};">{{metrics.userSpecific.todayQuotations}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Revenue Generated</span>
            <span class="detail-value" style="font-weight: 700; color: #7c2d92; font-size: 16px;">{{metrics.totalRevenue}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Claims Processed</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (gte metrics.userSpecific.todayClaims 5)}}#22c55e{{else if (gte metrics.userSpecific.todayClaims 2)}}#f59e0b{{else}}#6b7280{{/if}};">{{metrics.userSpecific.todayClaims}}</span>
        </div>
    </div>
</div>

<!-- Performance Analytics -->
{{#if metrics.performance}}
<div class="info-card" style="background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); border-left-color: #22c55e;">
    <h4 style="color: #15803d;">üéØ Performance Analytics</h4>
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">Overall Performance Score</span>
            <span class="detail-value" style="font-weight: 700; color: {{#if (gte metrics.performance.overallScore 85)}}#22c55e{{else if (gte metrics.performance.overallScore 70)}}#f59e0b{{else}}#ef4444{{/if}}; font-size: 17px;">{{metrics.performance.overallScore}}/100</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Task Efficiency</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (gte metrics.performance.taskEfficiency 0.8)}}#22c55e{{else if (gte metrics.performance.taskEfficiency 0.6)}}#f59e0b{{else}}#ef4444{{/if}};">{{metrics.performance.taskEfficiency}}%</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Lead Conversion Rate</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (gte metrics.performance.leadConversionRate 0.3)}}#22c55e{{else if (gte metrics.performance.leadConversionRate 0.2)}}#f59e0b{{else}}#ef4444{{/if}};">{{metrics.performance.leadConversionRate}}%</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Revenue per Hour</span>
            <span class="detail-value" style="font-weight: 700; color: #7c2d92; font-size: 16px;">{{metrics.performance.revenuePerHour}}</span>
        </div>
    </div>
    {{#if metrics.performance.strengths}}
    <div style="margin-top: 16px; padding: 12px; background: rgba(34, 197, 94, 0.05); border-radius: 8px; border-left: 3px solid #22c55e;">
        <div style="font-size: 14px; color: #15803d;">
            <strong>üí™ Key Strengths:</strong> {{#each metrics.performance.strengths}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}
        </div>
    </div>
    {{/if}}
    {{#if metrics.performance.improvementAreas}}
    <div style="margin-top: 8px; padding: 12px; background: rgba(245, 158, 11, 0.05); border-radius: 8px; border-left: 3px solid #f59e0b;">
        <div style="font-size: 14px; color: #92400e;">
            <strong>üéØ Growth Areas:</strong> {{#each metrics.performance.improvementAreas}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}
        </div>
    </div>
    {{/if}}
</div>
{{/if}}

<!-- Productivity Insights -->
{{#if metrics.productivity}}
<div class="info-card" style="background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); border-left-color: #3b82f6;">
    <h4 style="color: #1d4ed8;">‚ö° Productivity Insights</h4>
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">Productivity Score</span>
            <span class="detail-value" style="font-weight: 700; color: {{#if (gte metrics.productivity.score 85)}}#22c55e{{else if (gte metrics.productivity.score 70)}}#f59e0b{{else}}#ef4444{{/if}}; font-size: 17px;">{{metrics.productivity.score}}/100</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Peak Performance Hour</span>
            <span class="detail-value" style="font-weight: 600; color: #1d4ed8;">{{metrics.productivity.peakHour}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Average Focus Time</span>
            <span class="detail-value" style="font-weight: 600; color: #7c2d92;">{{metrics.productivity.focusTime}} min</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Work Pattern Consistency</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (eq metrics.productivity.workPatterns 'Highly Consistent')}}#22c55e{{else if (eq metrics.productivity.workPatterns 'Consistent')}}#f59e0b{{else}}#ef4444{{/if}};">{{metrics.productivity.workPatterns}}</span>
        </div>
    </div>
    {{#if metrics.productivity.recommendations}}
    <div style="margin-top: 16px; padding: 12px; background: rgba(59, 130, 246, 0.05); border-radius: 8px; border-left: 3px solid #3b82f6;">
        <div style="font-size: 14px; color: #1d4ed8;">
            <strong>üí° Productivity Tips:</strong> {{#each metrics.productivity.recommendations}}{{this}}{{#unless @last}}; {{/unless}}{{/each}}
        </div>
    </div>
    {{/if}}
</div>
{{/if}}

<!-- Experience & Gamification -->
{{#if metrics.userSpecific.xpEarned}}
<div class="info-card" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left-color: #f59e0b;">
    <h4 style="color: #92400e;">üèÜ Experience & Achievement Level</h4>
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">XP Earned Today</span>
            <span class="detail-value" style="font-weight: 700; color: #d97706; font-size: 16px;">+{{metrics.userSpecific.xpEarned}} XP</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Current Level</span>
            <span class="detail-value" style="font-weight: 700; color: #92400e;">Level {{metrics.userSpecific.currentLevel}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Team Ranking</span>
            <span class="detail-value" style="font-weight: 700; color: #92400e;">{{metrics.userSpecific.currentRank}}</span>
        </div>
    </div>
</div>
{{/if}}

<!-- Target Progress Tracking -->
{{#if metrics.targets.hasTargets}}
<div class="info-card">
    <h4>üéØ Target Progress - {{metrics.targets.targetPeriod}}</h4>
    <div class="detail-grid">
        {{#if metrics.targets.salesTarget}}
        <div class="detail-item">
            <span class="detail-label">Sales Progress</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (gte metrics.targets.targetProgress.sales.progress 80)}}#22c55e{{else if (gte metrics.targets.targetProgress.sales.progress 60)}}#f59e0b{{else}}#ef4444{{/if}};">
                {{metrics.targets.salesTarget.formatted}} / {{metrics.targets.salesTarget.targetFormatted}} 
                ({{metrics.targets.targetProgress.sales.progress}}%)
            </span>
        </div>
        {{/if}}
        {{#if metrics.targets.hoursTarget}}
        <div class="detail-item">
            <span class="detail-label">Hours Progress</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (gte metrics.targets.targetProgress.hours.progress 80)}}#22c55e{{else if (gte metrics.targets.targetProgress.hours.progress 60)}}#f59e0b{{else}}#ef4444{{/if}};">
                {{metrics.targets.hoursTarget.current}}h / {{metrics.targets.hoursTarget.target}}h 
                ({{metrics.targets.targetProgress.hours.progress}}%)
            </span>
        </div>
        {{/if}}
        {{#if metrics.targets.leadsTarget}}
        <div class="detail-item">
            <span class="detail-label">Leads Progress</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (gte metrics.targets.targetProgress.leads.progress 80)}}#22c55e{{else if (gte metrics.targets.targetProgress.leads.progress 60)}}#f59e0b{{else}}#ef4444{{/if}};">
                {{metrics.targets.leadsTarget.current}} / {{metrics.targets.leadsTarget.target}} 
                ({{metrics.targets.targetProgress.leads.progress}}%)
            </span>
        </div>
        {{/if}}
        {{#if metrics.targets.clientsTarget}}
        <div class="detail-item">
            <span class="detail-label">New Clients Progress</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (gte metrics.targets.targetProgress.clients.progress 80)}}#22c55e{{else if (gte metrics.targets.targetProgress.clients.progress 60)}}#f59e0b{{else}}#ef4444{{/if}};">
                {{metrics.targets.clientsTarget.current}} / {{metrics.targets.clientsTarget.target}} 
                ({{metrics.targets.targetProgress.clients.progress}}%)
            </span>
        </div>
        {{/if}}
        {{#if metrics.targets.checkInsTarget}}
        <div class="detail-item">
            <span class="detail-label">Check-ins Progress</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (gte metrics.targets.targetProgress.checkIns.progress 80)}}#22c55e{{else if (gte metrics.targets.targetProgress.checkIns.progress 60)}}#f59e0b{{else}}#ef4444{{/if}};">
                {{metrics.targets.checkInsTarget.current}} / {{metrics.targets.checkInsTarget.target}} 
                ({{metrics.targets.targetProgress.checkIns.progress}}%)
            </span>
        </div>
        {{/if}}
    </div>
</div>
{{/if}}

<!-- Weekly Performance Comparison -->
{{#if metrics.weeklyComparison}}
<div class="info-card" style="background: linear-gradient(135deg, #fdf4ff 0%, #fae8ff 100%); border-left-color: #a855f7;">
    <h4 style="color: #7c2d92;">üìä Weekly Performance Comparison</h4>
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">Performance Trend</span>
            <span class="detail-value" style="font-weight: 700; color: {{#if (eq metrics.weeklyComparison.trend 'improving')}}#22c55e{{else if (eq metrics.weeklyComparison.trend 'stable')}}#f59e0b{{else}}#ef4444{{/if}}; font-size: 16px;">
                {{#if (eq metrics.weeklyComparison.trend 'improving')}}üìà Improving{{else if (eq metrics.weeklyComparison.trend 'stable')}}‚û°Ô∏è Stable{{else}}üìâ Declining{{/if}}
            </span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Hours Growth</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (startsWith metrics.weeklyComparison.changes.hours "+")}}#22c55e{{else if (eq metrics.weeklyComparison.changes.hours "0%")}}#6b7280{{else}}#ef4444{{/if}};">{{metrics.weeklyComparison.changes.hours}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Tasks Growth</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (startsWith metrics.weeklyComparison.changes.tasks "+")}}#22c55e{{else if (eq metrics.weeklyComparison.changes.tasks "0%")}}#6b7280{{else}}#ef4444{{/if}};">{{metrics.weeklyComparison.changes.tasks}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Revenue Growth</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (startsWith metrics.weeklyComparison.changes.revenue "+")}}#22c55e{{else if (eq metrics.weeklyComparison.changes.revenue "0%")}}#6b7280{{else}}#ef4444{{/if}};">{{metrics.weeklyComparison.changes.revenue}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Leads Growth</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (startsWith metrics.weeklyComparison.changes.leads "+")}}#22c55e{{else if (eq metrics.weeklyComparison.changes.leads "0%")}}#6b7280{{else}}#ef4444{{/if}};">{{metrics.weeklyComparison.changes.leads}}</span>
        </div>
    </div>
    <div style="margin-top: 16px; padding: 12px; background: rgba(168, 85, 247, 0.05); border-radius: 8px; border-left: 3px solid #a855f7;">
        <div style="font-size: 14px; color: #7c2d92;">
            <strong>üìà This Week:</strong> {{metrics.weeklyComparison.current.hours}}h worked, {{metrics.weeklyComparison.current.tasks}} tasks, {{metrics.weeklyComparison.current.revenue}} revenue, {{metrics.weeklyComparison.current.leads}} leads
        </div>
        <div style="font-size: 14px; color: #6b7280; margin-top: 4px;">
            <strong>üìã Last Week:</strong> {{metrics.weeklyComparison.previous.hours}}h worked, {{metrics.weeklyComparison.previous.tasks}} tasks, {{metrics.weeklyComparison.previous.revenue}} revenue, {{metrics.weeklyComparison.previous.leads}} leads
        </div>
    </div>
</div>
{{/if}}

<!-- Predictive Analytics & Forecasting -->
{{#if metrics.predictions}}
<div class="info-card" style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-left-color: #0ea5e9;">
    <h4 style="color: #0369a1;">üîÆ Predictive Analytics & Forecasting</h4>
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">Target Achievement Probability</span>
            <span class="detail-value" style="font-weight: 700; color: {{#if (gte metrics.predictions.targetAchievementProbability 80)}}#22c55e{{else if (gte metrics.predictions.targetAchievementProbability 60)}}#f59e0b{{else}}#ef4444{{/if}}; font-size: 17px;">{{metrics.predictions.targetAchievementProbability}}%</span>
        </div>
        {{#if metrics.predictions.projectedCompletion.sales}}
        <div class="detail-item">
            <span class="detail-label">Projected Sales Target</span>
            <span class="detail-value" style="font-weight: 600; color: #0369a1;">{{metrics.predictions.projectedCompletion.sales.date}}</span>
        </div>
        {{/if}}
        {{#if metrics.predictions.projectedCompletion.hours}}
        <div class="detail-item">
            <span class="detail-label">Projected Hours Target</span>
            <span class="detail-value" style="font-weight: 600; color: #0369a1;">{{metrics.predictions.projectedCompletion.hours.date}}</span>
        </div>
        {{/if}}
        {{#if metrics.predictions.projectedCompletion.leads}}
        <div class="detail-item">
            <span class="detail-label">Projected Leads Target</span>
            <span class="detail-value" style="font-weight: 600; color: #0369a1;">{{metrics.predictions.projectedCompletion.leads.date}}</span>
        </div>
        {{/if}}
    </div>
    {{#if metrics.predictions.recommendations}}
    <div style="margin-top: 16px; padding: 12px; background: rgba(14, 165, 233, 0.05); border-radius: 8px; border-left: 3px solid #0ea5e9;">
        <div style="font-size: 14px; color: #0369a1;">
            <strong>üéØ Strategic Recommendations:</strong> {{#each metrics.predictions.recommendations}}{{this}}{{#unless @last}}; {{/unless}}{{/each}}
        </div>
    </div>
    {{/if}}
    {{#if metrics.predictions.riskFactors}}
    <div style="margin-top: 8px; padding: 12px; background: rgba(239, 68, 68, 0.05); border-radius: 8px; border-left: 3px solid #ef4444;">
        <div style="font-size: 14px; color: #b91c1c;">
            <strong>‚ö†Ô∏è Risk Factors:</strong> {{#each metrics.predictions.riskFactors}}{{this}}{{#unless @last}}; {{/unless}}{{/each}}
        </div>
    </div>
    {{/if}}
</div>
{{/if}}

<!-- Attendance & Time Management -->
{{#if metrics.attendance.startTime}}
<div class="info-card">
    <h4>‚è∞ Attendance & Time Management</h4>
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">Work Status</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (eq metrics.attendance.status 'Perfect')}}#22c55e{{else if (eq metrics.attendance.status 'On Time')}}#0ea5e9{{else if (eq metrics.attendance.status 'Late')}}#f59e0b{{else}}#ef4444{{/if}};">{{metrics.attendance.status}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Start Time</span>
            <span class="detail-value" style="font-weight: 600; color: #4b5563;">{{metrics.attendance.startTime}}</span>
        </div>
        {{#if metrics.attendance.endTime}}
        <div class="detail-item">
            <span class="detail-label">End Time</span>
            <span class="detail-value" style="font-weight: 600; color: #4b5563;">{{metrics.attendance.endTime}}</span>
        </div>
        {{/if}}
        <div class="detail-item">
            <span class="detail-label">Total Duration</span>
            <span class="detail-value" style="font-weight: 700; color: #7c2d92;">{{metrics.attendance.duration}}</span>
        </div>
        {{#if metrics.attendance.overtime}}
        {{#unless (eq metrics.attendance.overtime "0h 0m")}}
        <div class="detail-item">
            <span class="detail-label">Overtime Worked</span>
            <span class="detail-value" style="font-weight: 700; color: #f59e0b; font-size: 17px;">‚è∞ {{metrics.attendance.overtime}}</span>
        </div>
        {{/unless}}
        {{/if}}
    </div>
    {{#if metrics.attendance.checkInLocation}}
    <div style="margin-top: 16px; padding: 12px; background: rgba(168, 85, 247, 0.05); border-radius: 8px; border-left: 3px solid #A855F7;">
        <div style="font-size: 14px; color: #4b5563;">
            <strong style="color: #7c2d92;">Check-in Location:</strong> 
            {{metrics.attendance.checkInLocation.latitude}}, {{metrics.attendance.checkInLocation.longitude}}
        </div>
    </div>
    {{/if}}
</div>
{{/if}}

<!-- Performance Growth Trends -->
<div class="info-card">
    <h4>üìä Performance Growth vs Yesterday</h4>
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">Quotations Growth</span>
            <span class="detail-value" style="font-weight: 700; color: {{#if (startsWith metrics.quotationGrowth "+")}}#22c55e{{else}}{{#unless (eq metrics.quotationGrowth "0%")}}#ef4444{{else}}#6b7280{{/unless}}{{/if}};">
                {{#if (startsWith metrics.quotationGrowth "+")}}üìà{{else}}{{#unless (eq metrics.quotationGrowth "0%")}}üìâ{{else}}‚û°Ô∏è{{/unless}}{{/if}} {{metrics.quotationGrowth}}
            </span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Revenue Growth</span>
            <span class="detail-value" style="font-weight: 700; color: {{#if (startsWith metrics.revenueGrowth "+")}}#22c55e{{else}}{{#unless (eq metrics.revenueGrowth "0%")}}#ef4444{{else}}#6b7280{{/unless}}{{/if}};">
                {{#if (startsWith metrics.revenueGrowth "+")}}üìà{{else}}{{#unless (eq metrics.revenueGrowth "0%")}}üìâ{{else}}‚û°Ô∏è{{/unless}}{{/if}} {{metrics.revenueGrowth}}
            </span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Customer Growth</span>
            <span class="detail-value" style="font-weight: 700; color: {{#if (startsWith metrics.customerGrowth "+")}}#22c55e{{else}}{{#unless (eq metrics.customerGrowth "0%")}}#ef4444{{else}}#6b7280{{/unless}}{{/if}};">
                {{#if (startsWith metrics.customerGrowth "+")}}üìà{{else}}{{#unless (eq metrics.customerGrowth "0%")}}üìâ{{else}}‚û°Ô∏è{{/unless}}{{/if}} {{metrics.customerGrowth}}
            </span>
        </div>
        <div class="detail-item">
            <span class="detail-label">New Customers Today</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (gt metrics.newCustomers 2)}}#22c55e{{else if (gte metrics.newCustomers 1)}}#f59e0b{{else}}#6b7280{{/if}};">{{metrics.newCustomers}}</span>
        </div>
    </div>
</div>

<!-- Wellness & Work-Life Balance -->
{{#if metrics.wellness}}
<div class="info-card" style="background: linear-gradient(135deg, #fefce8 0%, #fef3c7 100%); border-left-color: #eab308;">
    <h4 style="color: #a16207;">üå± Wellness & Work-Life Balance</h4>
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">Overall Wellness Score</span>
            <span class="detail-value" style="font-weight: 700; color: {{#if (gte metrics.wellness.score 85)}}#22c55e{{else if (gte metrics.wellness.score 70)}}#f59e0b{{else}}#ef4444{{/if}}; font-size: 17px;">{{metrics.wellness.score}}/100</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Work-Life Balance</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (gte metrics.wellness.workLifeBalance.score 80)}}#22c55e{{else if (gte metrics.wellness.workLifeBalance.score 60)}}#f59e0b{{else}}#ef4444{{/if}};">{{metrics.wellness.workLifeBalance.score}}/100</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Daily Average Hours</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (lte metrics.wellness.workLifeBalance.averageHoursPerDay 9)}}#22c55e{{else if (lte metrics.wellness.workLifeBalance.averageHoursPerDay 10)}}#f59e0b{{else}}#ef4444{{/if}};">{{metrics.wellness.workLifeBalance.averageHoursPerDay}}h</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Stress Level</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (eq metrics.wellness.stressLevel 'Low')}}#22c55e{{else if (eq metrics.wellness.stressLevel 'Moderate')}}#f59e0b{{else}}#ef4444{{/if}};">{{metrics.wellness.stressLevel}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Overtime Days This Week</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (eq metrics.wellness.workLifeBalance.overtimeDays 0)}}#22c55e{{else if (lte metrics.wellness.workLifeBalance.overtimeDays 2)}}#f59e0b{{else}}#ef4444{{/if}};">{{metrics.wellness.workLifeBalance.overtimeDays}} days</span>
        </div>
    </div>
    {{#if metrics.wellness.recommendations}}
    <div style="margin-top: 16px; padding: 12px; background: rgba(234, 179, 8, 0.05); border-radius: 8px; border-left: 3px solid #eab308;">
        <div style="font-size: 14px; color: #a16207;">
            <strong>üíö Wellness Recommendations:</strong> {{#each metrics.wellness.recommendations}}{{this}}{{#unless @last}}; {{/unless}}{{/each}}
        </div>
    </div>
    {{/if}}
    <div style="margin-top: 12px; padding: 12px; background: rgba(34, 197, 94, 0.05); border-radius: 8px; border-left: 3px solid #22c55e;">
        <div style="font-size: 14px; color: #15803d;">
            <strong>üßò Daily Wellness Tip:</strong> {{#if (lte metrics.wellness.workLifeBalance.averageHoursPerDay 8)}}Great work-life balance today! Remember to maintain consistent boundaries for sustained performance.{{else if (lte metrics.wellness.workLifeBalance.averageHoursPerDay 10)}}Consider incorporating more breaks and ensuring adequate rest to maintain peak performance.{{else}}Your wellness matters - focus on rest and recovery to sustain long-term success and prevent burnout.{{/if}}
        </div>
    </div>
</div>
{{/if}}

<!-- Location & Travel Summary -->
{{#if tracking.totalDistance}}

<!-- Movement Efficiency Section -->
{{#if tracking.movementEfficiency}}
<div class="info-card">
    <h4>üöó Movement Efficiency Analysis</h4>
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">Total Distance</span>
            <span class="detail-value" style="font-weight: 700; color: #7c2d92; font-size: 16px;">{{tracking.totalDistance}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Efficiency Rating</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (eq tracking.movementEfficiency.efficiencyRating 'High')}}#22c55e{{else if (eq tracking.movementEfficiency.efficiencyRating 'Medium')}}#f59e0b{{else}}#ef4444{{/if}};">{{tracking.movementEfficiency.efficiencyRating}}</span>
        </div>
        {{#if tracking.tripSummary}}
        <div class="detail-item">
            <span class="detail-label">Average Speed</span>
            <span class="detail-value" style="color: #0ea5e9;">{{tracking.tripSummary.averageSpeedKmh}} km/h</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Max Speed</span>
            <span class="detail-value" style="color: #f59e0b;">{{tracking.tripSummary.maxSpeedKmh}} km/h</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Moving Time</span>
            <span class="detail-value" style="color: #22c55e;">{{tracking.tripSummary.movingTimeFormatted}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Stopped Time</span>
            <span class="detail-value" style="color: #8b5cf6;">{{tracking.tripSummary.stoppedTimeFormatted}}</span>
        </div>
        {{/if}}
    </div>
    
    {{#if tracking.movementEfficiency.travelOptimization.suggestions}}
    {{#if tracking.movementEfficiency.travelOptimization.suggestions.length}}
    <div style="margin-top: 16px; padding: 16px; background: rgba(34, 197, 94, 0.05); border-radius: 12px; border-left: 4px solid #22c55e;">
        <h5 style="color: #15803d; margin: 0 0 12px 0; font-size: 15px; font-weight: 600;">üí° Travel Optimization Tips</h5>
        <div style="list-style: none; padding: 0; margin: 0;">
            {{#each tracking.movementEfficiency.travelOptimization.suggestions}}
            <div style="padding: 4px 0; color: #15803d; font-size: 14px; line-height: 1.5;">
                ‚Ä¢ {{this}}
            </div>
            {{/each}}
        </div>
    </div>
    {{/if}}
    {{/if}}
</div>
{{/if}}

<!-- Location Productivity Section -->
{{#if tracking.locationProductivity}}
<div class="info-card">
    <h4>üìç Location Productivity</h4>
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">Total Stops</span>
            <span class="detail-value" style="font-weight: 600; color: #0ea5e9;">{{tracking.locationProductivity.totalLocations}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Productive Stops</span>
            <span class="detail-value" style="font-weight: 600; color: #22c55e;">{{tracking.locationProductivity.productiveStops}} ({{tracking.locationProductivity.productivityRatio}}%)</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Avg Time Per Stop</span>
            <span class="detail-value" style="font-weight: 600; color: #8b5cf6;">{{tracking.locationProductivity.averageTimePerStopFormatted}}</span>
        </div>
    </div>
    
    {{#if tracking.locationProductivity.keyLocations}}
    {{#if tracking.locationProductivity.keyLocations.length}}
    <div style="margin-top: 16px; padding: 16px; background: rgba(168, 85, 247, 0.05); border-radius: 12px; border-left: 4px solid #A855F7;">
        <h5 style="color: #7c2d92; margin: 0 0 12px 0; font-size: 15px; font-weight: 600;">üéØ Key Productive Locations</h5>
        <div style="list-style: none; padding: 0; margin: 0;">
            {{#each tracking.locationProductivity.keyLocations}}
            <div style="padding: 8px 0; {{#unless @last}}border-bottom: 1px solid rgba(168, 85, 247, 0.1);{{/unless}}">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 4px;">
                    <strong style="color: #1e293b; font-size: 14px;">{{address}}</strong>
                    <span style="background: {{#if (eq productivity 'High')}}#dcfce7{{else if (eq productivity 'Medium')}}#fef3c7{{else if (eq productivity 'Low')}}#fee2e2{{else}}#f1f5f9{{/if}}; color: {{#if (eq productivity 'High')}}#15803d{{else if (eq productivity 'Medium')}}#d97706{{else if (eq productivity 'Low')}}#dc2626{{else}}#64748b{{/if}}; padding: 2px 8px; border-radius: 12px; font-size: 12px; font-weight: 500;">{{productivity}}</span>
                </div>
                <div style="color: #64748b; font-size: 13px; line-height: 1.4;">
                    Duration: {{duration}} | Time: {{startTime}} - {{endTime}}
                </div>
            </div>
            {{/each}}
        </div>
    </div>
    {{/if}}
    {{/if}}
</div>
{{/if}}

<!-- Travel Insights Section -->
{{#if tracking.travelInsights}}
<div class="info-card">
    <h4>üó∫Ô∏è Travel Insights & Patterns</h4>
    
    <!-- Travel Efficiency Metrics -->
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">Travel Efficiency</span>
            <span class="detail-value" style="font-weight: 600; color: {{#if (eq tracking.travelInsights.travelEfficiency.score 'High')}}#22c55e{{else if (eq tracking.travelInsights.travelEfficiency.score 'Medium')}}#f59e0b{{else}}#ef4444{{/if}};">{{tracking.travelInsights.travelEfficiency.score}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Moving Time Ratio</span>
            <span class="detail-value" style="color: #8b5cf6;">{{tracking.travelInsights.travelEfficiency.movingRatio}}%</span>
        </div>
        {{#if tracking.travelInsights.routeOptimization.canOptimize}}
        <div class="detail-item">
            <span class="detail-label">Route Optimization</span>
            <span class="detail-value" style="color: #f59e0b;">Save {{tracking.travelInsights.routeOptimization.potentialSavings}} km</span>
        </div>
        {{/if}}
    </div>

    <!-- Movement Patterns -->
    {{#if tracking.travelInsights.movementPatterns.pattern}}
    {{#unless (eq tracking.travelInsights.movementPatterns.pattern 'Insufficient data')}}
    <div style="margin-top: 16px; padding: 16px; background: rgba(59, 130, 246, 0.05); border-radius: 12px; border-left: 4px solid #3b82f6;">
        <h5 style="color: #1d4ed8; margin: 0 0 8px 0; font-size: 15px; font-weight: 600;">üìä Movement Pattern Analysis</h5>
        <p style="color: #1e40af; margin: 0 0 8px 0; font-size: 14px; line-height: 1.5;">
            {{tracking.travelInsights.movementPatterns.pattern}}
        </p>
        {{#if tracking.travelInsights.movementPatterns.peakMovementHour}}
        <p style="color: #64748b; margin: 0; font-size: 13px;">
            Peak activity: {{tracking.travelInsights.movementPatterns.peakMovementDistance}} km at {{tracking.travelInsights.movementPatterns.peakMovementHour}}:00
        </p>
        {{/if}}
    </div>
    {{/unless}}
    {{/if}}

    <!-- Route Optimization -->
    {{#if tracking.travelInsights.routeOptimization.recommendation}}
    <div style="margin-top: 16px; padding: 16px; background: rgba(245, 158, 11, 0.05); border-radius: 12px; border-left: 4px solid #f59e0b;">
        <h5 style="color: #d97706; margin: 0 0 8px 0; font-size: 15px; font-weight: 600;">üõ£Ô∏è Route Optimization</h5>
        <p style="color: #92400e; margin: 0; font-size: 14px; line-height: 1.5;">
            {{tracking.travelInsights.routeOptimization.recommendation}}
        </p>
    </div>
    {{/if}}

</div>
{{/if}}

<!-- Detailed Stop Analysis (fallback to original if new data not available) -->
{{#if tracking.stops}}
{{#unless tracking.locationProductivity}}
<div class="info-card">
    <h4>üìç Location Activity</h4>
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">Total Distance</span>
            <span class="detail-value" style="font-weight: 700; color: #7c2d92; font-size: 16px;">{{tracking.totalDistance}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Locations Visited</span>
            <span class="detail-value" style="font-weight: 600; color: #0ea5e9;">{{tracking.stops.length}}</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Avg Time Per Location</span>
            <span class="detail-value" style="font-weight: 600; color: #8b5cf6;">{{tracking.averageTimePerLocation}}</span>
        </div>
    </div>
    <div style="margin-top: 16px; padding: 16px; background: rgba(168, 85, 247, 0.05); border-radius: 12px; border-left: 4px solid #A855F7;">
        <h5 style="color: #7c2d92; margin: 0 0 12px 0; font-size: 15px; font-weight: 600;">üìç Key Locations Today</h5>
        <div style="list-style: none; padding: 0; margin: 0;">
            {{#each tracking.stops}}
            {{#unless (gt @index 4)}}
            <div style="padding: 6px 0; color: #4b5563; padding-left: 25px; position: relative; font-size: 14px; line-height: 1.5; {{#unless @last}}border-bottom: 1px solid rgba(168, 85, 247, 0.1);{{/unless}}">
                <span style="position: absolute; left: 0; top: 6px; color: #A855F7; font-weight: bold; font-size: 12px;">üìç</span>
                <strong>{{address}}</strong> - {{duration}}
                {{#if startTime}}({{startTime}} - {{endTime}}){{/if}}
            </div>
            {{/unless}}
            {{/each}}
        </div>
    </div>
</div>
{{/unless}}
{{/if}}

{{/if}}

<!-- Quick Dashboard Access -->
<div class="cta-section">
    <a href="{{dashboardUrl}}" class="cta-button">View Full Personal Dashboard</a>
</div>

<!-- Enhanced Performance Insights & Growth Tips -->
<div class="info-card">
    <h4>üí° Performance Insights & Growth Tips</h4>
    <div class="feature-list" style="list-style: none; padding: 0; margin: 16px 0;">
        <li style="padding: 12px 0; color: #4b5563; padding-left: 35px; position: relative; font-size: 15px; line-height: 1.6; border-bottom: 1px solid rgba(168, 85, 247, 0.1);">
            <span style="position: absolute; left: 0; top: 12px; color: #22c55e; font-weight: bold; font-size: 14px; width: 20px; height: 20px; background: #dcfce7; border-radius: 50%; display: flex; align-items: center; justify-content: center;">üí™</span>
            <strong>Performance Analysis:</strong> {{#if metrics.performance}}Your overall performance score is {{metrics.performance.overallScore}}/100. {{#if (gte metrics.performance.overallScore 85)}}Exceptional performance! You're operating at peak efficiency.{{else if (gte metrics.performance.overallScore 70)}}Strong performance with room for optimization. Focus on your improvement areas for breakthrough results.{{else}}Significant growth opportunity exists. Concentrate on developing your core strengths while addressing key improvement areas.{{/if}}{{else}}{{#if (gte metrics.userSpecific.hoursWorked 8)}}Excellent work commitment today! Keep maintaining this strong momentum.{{else if (gte metrics.userSpecific.hoursWorked 6)}}Good work balance. Consider extending focus time for even better results.{{else}}Focus on increasing dedicated work time to boost your productivity metrics.{{/if}}{{/if}}
        </li>
        <li style="padding: 12px 0; color: #4b5563; padding-left: 35px; position: relative; font-size: 15px; line-height: 1.6; border-bottom: 1px solid rgba(168, 85, 247, 0.1);">
            <span style="position: absolute; left: 0; top: 12px; color: #3b82f6; font-weight: bold; font-size: 14px; width: 20px; height: 20px; background: #dbeafe; border-radius: 50%; display: flex; align-items: center; justify-content: center;">‚ö°</span>
            <strong>Productivity Optimization:</strong> {{#if metrics.productivity}}Your productivity score is {{metrics.productivity.score}}/100. {{#if metrics.productivity.peakHour}}Your peak performance hour is {{metrics.productivity.peakHour}} - schedule your most important tasks during this time.{{/if}} {{#if (gte metrics.productivity.score 85)}}Outstanding productivity! You're maximizing your time effectively.{{else if (gte metrics.productivity.score 70)}}Good productivity levels. Fine-tune your focus periods for even better results.{{else}}Enhance productivity by implementing time-blocking and minimizing distractions.{{/if}}{{else}}Optimize your work schedule by identifying and leveraging your peak performance hours for critical tasks.{{/if}}
        </li>
        <li style="padding: 12px 0; color: #4b5563; padding-left: 35px; position: relative; font-size: 15px; line-height: 1.6; border-bottom: 1px solid rgba(168, 85, 247, 0.1);">
            <span style="position: absolute; left: 0; top: 12px; color: #7c2d92; font-weight: bold; font-size: 14px; width: 20px; height: 20px; background: #fae8ff; border-radius: 50%; display: flex; align-items: center; justify-content: center;">üìä</span>
            <strong>Weekly Trend Analysis:</strong> {{#if metrics.weeklyComparison}}{{#if (eq metrics.weeklyComparison.trend 'improving')}}üìà You're on an upward trajectory! Your weekly performance shows consistent improvement across key metrics.{{else if (eq metrics.weeklyComparison.trend 'stable')}}‚û°Ô∏è Maintaining steady performance. Focus on breakthrough activities to accelerate growth.{{else}}üìâ Temporary dip detected. Refocus on core activities and leverage your proven strengths to regain momentum.{{/if}}{{else}}{{#if (startsWith metrics.revenueGrowth "+")}}Your revenue growth shows positive momentum! Continue leveraging successful strategies.{{else}}Focus on revenue-generating activities and client relationship building to improve growth trajectory.{{/if}}{{/if}}
        </li>
        <li style="padding: 12px 0; color: #4b5563; padding-left: 35px; position: relative; font-size: 15px; line-height: 1.6; border-bottom: 1px solid rgba(168, 85, 247, 0.1);">
            <span style="position: absolute; left: 0; top: 12px; color: #0369a1; font-weight: bold; font-size: 14px; width: 20px; height: 20px; background: #e0f2fe; border-radius: 50%; display: flex; align-items: center; justify-content: center;">üîÆ</span>
            <strong>Predictive Insights:</strong> {{#if metrics.predictions}}Based on current velocity, you have a {{metrics.predictions.targetAchievementProbability}}% probability of achieving your targets. {{#if (gte metrics.predictions.targetAchievementProbability 80)}}You're on track for exceptional results!{{else if (gte metrics.predictions.targetAchievementProbability 60)}}Accelerate key activities to ensure target achievement.{{else}}Implement strategic adjustments to improve your target achievement probability.{{/if}}{{else}}{{#if metrics.targets.hasTargets}}{{#if (gte metrics.targets.targetProgress.sales.progress 80)}}Outstanding progress toward your targets! You're on track for exceptional results.{{else if (gte metrics.targets.targetProgress.sales.progress 60)}}Good progress on targets. Focus on key activities to reach excellence.{{else}}Accelerate efforts toward your targets. Consistency is key to breakthrough results.{{/if}}{{else}}Set clear daily targets to track and improve your performance systematically.{{/if}}{{/if}}
        </li>
        <li style="padding: 12px 0; color: #4b5563; padding-left: 35px; position: relative; font-size: 15px; line-height: 1.6; border-bottom: 1px solid rgba(168, 85, 247, 0.1);">
            <span style="position: absolute; left: 0; top: 12px; color: #a16207; font-weight: bold; font-size: 14px; width: 20px; height: 20px; background: #fef3c7; border-radius: 50%; display: flex; align-items: center; justify-content: center;">üå±</span>
            <strong>Wellness Balance:</strong> {{#if metrics.wellness}}Your wellness score is {{metrics.wellness.score}}/100. {{#if (gte metrics.wellness.score 85)}}Excellent work-life balance! You're maintaining sustainable performance.{{else if (gte metrics.wellness.score 70)}}Good balance with minor adjustments needed. Prioritize recovery time.{{else}}Focus on work-life balance to prevent burnout and maintain long-term performance.{{/if}}{{else}}Maintain healthy work boundaries and prioritize recovery to sustain peak performance long-term.{{/if}}
        </li>
        <li style="padding: 12px 0; color: #4b5563; padding-left: 35px; position: relative; font-size: 15px; line-height: 1.6;">
            <span style="position: absolute; left: 0; top: 12px; color: #22c55e; font-weight: bold; font-size: 14px; width: 20px; height: 20px; background: #dcfce7; border-radius: 50%; display: flex; align-items: center; justify-content: center;">üöÄ</span>
            <strong>Tomorrow's Strategic Focus:</strong> {{#if metrics.performance.improvementAreas}}Prioritize {{#each metrics.performance.improvementAreas}}{{this}}{{#unless @last}} and {{/unless}}{{/each}} to unlock your next performance level.{{else}}Build on today's achievements by focusing on high-impact activities and maintaining consistent performance standards.{{/if}}
        </li>
    </div>
</div>

<!-- Motivational Closing -->
<div class="success-notice">
    <h4 style="color: #15803d; margin-bottom: 12px;">üåü Your Professional Journey</h4>
    <p style="color: #15803d; margin: 0; font-size: 16px; line-height: 1.6;">
        Every day brings new opportunities for growth and achievement. Your dedication and consistent effort are building toward remarkable professional success. 
        Keep pushing boundaries and celebrating each milestone! üéâ
    </p>
</div>

{{/base}}