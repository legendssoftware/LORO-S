{{#> layouts/base }}

{{#*inline "content"}}
<div class="header-section">
    <h1 style="color: #dc2626; margin: 0; font-size: 28px; font-weight: 700;">
        üóëÔ∏è Approval Request Deleted
    </h1>
    <div class="status-badge" style="margin-top: 12px; background: #fee2e2; color: #dc2626;">
        DELETED
    </div>
</div>

<div class="content-section">
    <p style="font-size: 16px; color: #374151; margin-bottom: 24px;">
        Hello <strong>{{name}}</strong>,
    </p>

    <p style="font-size: 16px; color: #374151; line-height: 1.6; margin-bottom: 24px;">
        An approval request has been deleted from the system. This notification is for record-keeping purposes.
    </p>

    {{> card title="Deleted Approval Details" }}
        <div class="detail-row">
            <span class="detail-label">Reference:</span>
            <span class="detail-value"><strong>{{approvalReference}}</strong></span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Title:</span>
            <span class="detail-value">{{title}}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Type:</span>
            <span class="detail-value">{{humanizeApprovalType type}}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Previous Status:</span>
            <span class="status-badge status-{{toLowerCase previousStatus}}">{{previousStatus}}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Priority:</span>
            <span class="priority-badge priority-{{toLowerCase priority}}">{{priority}}</span>
        </div>
        {{#if requestedAmount}}
        <div class="detail-row">
            <span class="detail-label">Amount:</span>
            <span class="detail-value">{{currency}} {{formatCurrency requestedAmount}}</span>
        </div>
        {{/if}}
        <div class="detail-row">
            <span class="detail-label">Created Date:</span>
            <span class="detail-value">{{formatDateTime createdAt}}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Deleted Date:</span>
            <span class="detail-value">{{formatDateTime deletedAt}}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Deleted By:</span>
            <span class="detail-value">{{deletedByName}}</span>
        </div>
    {{/card}}

    {{#if description}}
    {{> card title="Original Description" }}
        <p style="margin: 0; white-space: pre-wrap; color: #6b7280;">{{description}}</p>
    {{/card}}
    {{/if}}

    {{> card title="Requester Information" }}
        <div class="detail-row">
            <span class="detail-label">Name:</span>
            <span class="detail-value">{{requesterName}}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Email:</span>
            <span class="detail-value">{{requesterEmail}}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Organization:</span>
            <span class="detail-value">{{organizationName}}</span>
        </div>
        {{#if branchName}}
        <div class="detail-row">
            <span class="detail-label">Branch:</span>
            <span class="detail-value">{{branchName}}</span>
        </div>
        {{/if}}
    {{/card}}

    {{#if deletionReason}}
    {{> card title="Deletion Reason" }}
        <p style="margin: 0; white-space: pre-wrap; color: #dc2626;">{{deletionReason}}</p>
    {{/card}}
    {{/if}}

    {{#if supportingDocuments}}
    {{> card title="Associated Documents (No Longer Accessible)" }}
        <ul style="margin: 0; padding-left: 20px;">
            {{#each supportingDocuments}}
            <li style="margin-bottom: 8px; color: #9ca3af; text-decoration: line-through;">
                üìé {{getFileName this}}
            </li>
            {{/each}}
        </ul>
        <p style="margin-top: 12px; font-size: 14px; color: #6b7280; font-style: italic;">
            Note: Supporting documents may no longer be accessible due to the deletion.
        </p>
    {{/card}}
    {{/if}}

    {{#if entityType}}
    {{> card title="Related Information" }}
        <div class="detail-row">
            <span class="detail-label">Entity Type:</span>
            <span class="detail-value">{{humanizeEntityType entityType}}</span>
        </div>
        {{#if entityId}}
        <div class="detail-row">
            <span class="detail-label">Entity ID:</span>
            <span class="detail-value">{{entityId}}</span>
        </div>
        {{/if}}
    {{/card}}
    {{/if}}

    <div class="action-section" style="margin: 32px 0; text-align: center;">
        {{> button 
            href=dashboardUrl 
            text="Go to Dashboard" 
            style="secondary"
        }}
        
        {{#if canRestore}}
        <div style="margin-top: 16px;">
            <a href="{{restoreUrl}}" style="color: #059669; text-decoration: none; font-size: 14px;">
                Restore this request (if eligible)
            </a>
        </div>
        {{/if}}
    </div>

    {{> alert type="warning" }}
        <p style="margin: 0;">
            <strong>Important:</strong> This approval request has been permanently deleted. 
            If this deletion was made in error, please contact your system administrator immediately.
            {{#if retentionPeriod}}
            Data may be recoverable within {{retentionPeriod}} days.
            {{/if}}
        </p>
    {{/alert}}

    {{#if lastComments}}
    {{> card title="Final Comments" }}
        <p style="margin: 0; font-style: italic; color: #6b7280;">{{lastComments}}</p>
    {{/card}}
    {{/if}}

    <div style="margin-top: 32px; padding: 16px; background: #f9fafb; border-radius: 8px; border-left: 4px solid #dc2626;">
        <h3 style="margin: 0 0 12px 0; color: #dc2626; font-size: 16px;">Audit Trail</h3>
        <p style="margin: 0; font-size: 14px; color: #6b7280;">
            This notification serves as an audit record of the approval deletion. 
            Please keep this email for compliance and record-keeping purposes.
        </p>
    </div>
</div>

<style>
.priority-badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
}

.priority-urgent { background: #fee2e2; color: #dc2626; }
.priority-high { background: #fed7aa; color: #ea580c; }
.priority-medium { background: #fef3c7; color: #d97706; }
.priority-low { background: #dcfce7; color: #16a34a; }

.status-badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 500;
    text-transform: uppercase;
}

.status-draft { background: #f3f4f6; color: #6b7280; }
.status-pending { background: #fef3c7; color: #d97706; }
.status-approved { background: #dcfce7; color: #16a34a; }
.status-rejected { background: #fee2e2; color: #dc2626; }
.status-withdrawn { background: #f3f4f6; color: #6b7280; }

.detail-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid #f3f4f6;
}

.detail-row:last-child {
    border-bottom: none;
    margin-bottom: 0;
}

.detail-label {
    font-weight: 600;
    color: #6b7280;
    min-width: 120px;
}

.detail-value {
    color: #374151;
    text-align: right;
    flex: 1;
}

.action-section {
    background: #fef2f2;
    padding: 24px;
    border-radius: 8px;
    border: 1px solid #fecaca;
}
</style>

{{/inline}}

{{/layouts/base}} 